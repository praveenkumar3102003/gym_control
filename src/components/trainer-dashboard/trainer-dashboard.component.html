<div class="dashboard-wrapper">
  <div class="dashboard-header">
    <div class="header-content">
      <div class="welcome-section">
        <div class="trainer-avatar">👨‍🏫</div>
        <div>
          <h1 class="dashboard-title">Welcome, {{ user?.name }}!</h1>
          <p class="user-role">{{ user?.role | titlecase }} Dashboard</p>
        </div>
      </div>
      <button class="btn btn-danger logout-btn" (click)="logout()">
        <i class="btn-icon">🚪</i>
        Logout
      </button>
    </div>
  </div>

  <div class="dashboard-grid">
    <!-- Gym Status Section -->
    <div class="card">
      <div class="card-header">
        <span class="card-icon">🏋️‍♂️</span>
        <h2 class="card-title">Gym Status Management</h2>
      </div>

      <div *ngIf="errorMessage" class="alert alert-error">
        <i class="alert-icon">⚠️</i> {{ errorMessage }}
      </div>
      <div *ngIf="successMessage" class="alert alert-success">
        <i class="alert-icon">✅</i> {{ successMessage }}
      </div>

      <div class="current-status">
        <h3 class="section-title"><i>📊</i> Current Status</h3>

        <div *ngIf="isLoading" class="loading-spinner">
          <div class="spinner"></div>
          <p>Loading...</p>
        </div>

        <div *ngIf="!isLoading" class="status-display">
          <span 
            class="status-badge"
            [ngClass]="{
              'status-open': currentGymStatus === 'open',
              'status-closed': currentGymStatus === 'closed' || currentGymStatus === 'unknown'
            }"
          >
            <i class="status-icon">
              <ng-container *ngIf="currentGymStatus === 'open'">🏃‍♂️</ng-container>
              <ng-container *ngIf="currentGymStatus === 'closed'">🔒</ng-container>
              <ng-container *ngIf="currentGymStatus === 'unknown'">❓</ng-container>
            </i>
            {{ currentGymStatus | titlecase }}
          </span>
          <p class="last-updated" *ngIf="lastUpdated">
            🕒 Last updated: <strong>{{ lastUpdated }}</strong>
          </p>
        </div>
      </div>

      <form (ngSubmit)="updateGymStatus()" class="update-form">
        <label for="newStatus" class="form-label">🎯 Select New Status</label>
        <select
          id="newStatus"
          class="form-control"
          [(ngModel)]="newStatus"
          name="newStatus"
          required
        >
          <option value="open">🏃‍♂️ Open</option>
          <option value="closed">🔒 Closed</option>
        </select>

        <button 
          type="submit" 
          class="btn btn-success full-width"
          [disabled]="isUpdating || !newStatus || newStatus === currentGymStatus"
        >
          <ng-container *ngIf="isUpdating">
            <i class="loading-spinner-small">⏳</i> Updating...
          </ng-container>
          <ng-container *ngIf="!isUpdating">
            <i class="btn-icon">🚀</i> Update Gym Status
          </ng-container>
        </button>
      </form>
    </div>

    <!-- Quick Actions -->
    <div class="card">
      <div class="card-header">
        <span class="card-icon">⚡</span>
        <h2 class="card-title">Quick Actions</h2>
      </div>
      <div class="quick-buttons">
        <button 
          class="btn btn-success"
          (click)="newStatus = 'open'; updateGymStatus()"
          [disabled]="isUpdating || currentGymStatus === 'open'"
        >
          🏃‍♂️ Open Gym
        </button>
        <button 
          class="btn btn-warning"
          (click)="newStatus = 'closed'; updateGymStatus()"
          [disabled]="isUpdating || currentGymStatus === 'closed'"
        >
          🔒 Close Gym
        </button>
      </div>
    </div>

<div class="user-management card">
  <div class="card-header">
    <div class="card-icon">👥</div>
    <h3 class="card-title">User Management</h3>
  </div>
  <div class="user-actions">
    <button class="btn btn-primary add-user-btn" (click)="addNewUser()">
      <i class="btn-icon">➕</i> Add New Student
    </button>
    <p class="user-help-text">
      <i class="help-icon">💡</i>
      Register a new student in the gym system
    </p>
  </div>
</div>


    <!-- Guidelines -->
    <div class="card">
      <div class="card-header">
        <span class="card-icon">📋</span>
        <h2 class="card-title">Trainer Guidelines</h2>
      </div>
      <ul class="info-list">
        <li>🔄 Update gym status at the beginning and end of each session</li>
        <li>🔒 Ensure gym is marked "Closed" when unsupervised</li>
        <li>📅 Students rely on status for planning</li>
        <li>⚡ Use quick actions for efficiency</li>
      </ul>
    </div>
  </div>
</div>
